# =============================================================================
# PUBLIC .htaccess - Front Controller
# =============================================================================
# Tüm PHP istekleri index.php üzerinden route edilir
# Static dosyalar (css, js, images) doğrudan sunulur
# =============================================================================

Options -Indexes -MultiViews

<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteBase /

    # =========================================================================
    # PAGES PHP ROUTER - EN ÖNCE!
    # pages/ altındaki TÜM PHP isteklerini front controller'a yönlendir
    # Hosting alt dizinlerde PHP handler engellediği için zorunlu
    # =========================================================================
    RewriteRule ^pages/.+\.php$ index.php [QSA,L]
    RewriteRule ^public/pages/.+\.php$ index.php [QSA,L]

    # =========================================================================
    # STATIC DOSYALAR: Sadece PHP OLMAYAN gerçek dosyalar bypass edilir
    # =========================================================================
    RewriteCond %{REQUEST_FILENAME} -f
    RewriteCond %{REQUEST_URI} !\.(php)$ [NC]
    RewriteRule ^ - [L]

    # Dizinler bypass
    RewriteCond %{REQUEST_FILENAME} -d
    RewriteRule ^ - [L]

    # =========================================================================
    # FRONT CONTROLLER: Diğer tüm istekler → index.php
    # =========================================================================
    RewriteRule ^(.*)$ index.php [QSA,L]
</IfModule>

# =========================================================================
# GÜVENLİK
# =========================================================================
<FilesMatch "^\.">
    <IfModule mod_authz_core.c>
        Require all denied
    </IfModule>
    <IfModule !mod_authz_core.c>
        Order deny,allow
        Deny from all
    </IfModule>
</FilesMatch>
